// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Enum para o status do Pet, uma boa prática para campos com valores definidos
enum StatusPet {
  DISPONIVEL
  ADOTADO
}

// Modelo para os Pets
model Pet {
  id              Int        @id @default(autoincrement())
  nome            String
  especie         String
  data_nascimento DateTime?  @db.Date // Opcional, pois pode ser aproximada
  descricao       String?
  status          StatusPet  @default(DISPONIVEL)
  adocao          Adocao?
}

// Modelo para os Adotantes
model Adotante {
  id       Int      @id @default(autoincrement())
  nome     String
  email    String   @unique
  telefone String
  
  // Endereço foi dividido em campos compostos
  rua      String
  numero   String? // Opcional, pois pode não ter número
  bairro   String
  cidade   String
  uf       String   @db.VarChar(2) // Limita a 2 caracteres, ex: "DF"

  adocoes  Adocao[]
}

// Modelo para as Adoções
model Adocao {
  id          Int      @id @default(autoincrement())
  data_adocao DateTime @default(now()) @db.Date
  pet_id      Int      @unique // Garante que um pet só pode ser adotado uma vez
  adotante_id Int

  pet      Pet      @relation(fields: [pet_id], references: [id])
  adotante Adotante @relation(fields: [adotante_id], references: [id])
}